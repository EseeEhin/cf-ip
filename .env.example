# 优选IP获取配置文件示例
# 复制此文件为 .env 并根据需要修改配置

# ==================== 数据源配置 ====================
# 优选IP数据源URL
SOURCE_URL=https://cfip.wxgqlfx.fun/

# ==================== 过滤配置 ====================
# 最大延迟阈值（毫秒），超过此值的节点将被过滤
MAX_LATENCY=100

# 国家过滤列表（逗号分隔的国家代码）
# 常用国家代码: JP(日本), US(美国), SG(新加坡), HK(香港), TW(台湾), KR(韩国)
# 默认: JP,HK,US
FILTER_COUNTRIES=JP,HK,US

# 每个国家查询的IP数量限制（仅适用于来源A）
# 默认: 10
QUERY_LIMIT=10

# ==================== 输出配置 ====================
# 输出文件路径
OUTPUT_FILE=output/optimal-ips.txt

# ==================== GitHub配置 ====================
# GitHub Personal Access Token（用于自动提交）
# 留空则不自动提交到GitHub
# 需要 repo 权限，在 https://github.com/settings/tokens 创建
GITHUB_TOKEN=

# GitHub仓库（格式: username/repo）
GITHUB_REPO=

# GitHub分支
GITHUB_BRANCH=main

# GitHub仓库中的文件路径

# ==================== 订阅项目API配置 ====================
# 订阅项目的Workers URL（例如: https://your-worker.workers.dev）
# 留空则不使用API上传功能
SUBSCRIPTION_API_URL=

# 订阅项目的API路径（UUID或自定义路径，例如: /351c9981-04b6-4103-aa4b-864aa9c91469）
# 留空则不使用API上传功能
SUBSCRIPTION_API_PATH=

# 是否启用API上传功能（true/false）
# 注意: 需要在订阅项目的配置管理页面开启"允许API管理 (ae)"选项
API_UPLOAD_ENABLED=false
GITHUB_FILE_PATH=optimal-ips.txt

# ==================== 请求配置 ====================
# 请求超时时间（秒）
REQUEST_TIMEOUT=30

# 最大重试次数
MAX_RETRIES=3

# ==================== 日志配置 ====================
# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 日志文件路径
LOG_FILE=logs/ip_fetcher.log

# ==================== 缓存配置 ====================
# 是否启用IP地理位置缓存
CACHE_ENABLED=true

# 缓存有效期（天）
CACHE_DAYS=30

# ==================== CF-RAY检测配置 ====================
# 用于获取Cloudflare节点真实数据中心位置
# 通过CF-RAY响应头识别节点实际所在的数据中心（如东京、香港、洛杉矶等）

# 是否启用CF-RAY检测（默认：true）
# 启用后：显示真实位置，如 104.16.132.229:443#A-JP-Tokyo
# 禁用后：显示为Anycast，如 104.16.132.229:443#A-CF-Anycast
# 详细说明请参考: CF_RAY_DETECTION.md
CF_RAY_DETECTION_ENABLED=true

# CF-RAY检测超时时间，单位：秒（默认：15）
# 单个IP的检测超时时间
# 网络良好：5-10秒 | 网络较差：15-20秒
# 注意：增加超时时间可以提高检测成功率，但会增加总处理时间
CF_RAY_TIMEOUT=15

# CF-RAY检测最大并发数（默认：5）
# 同时检测多个IP的并发线程数
# 少量IP（<50）：3-5 | 大量IP（>100）：8-10
# 注意：减少并发数可以提高单个请求的成功率，避免网络拥堵
CF_RAY_MAX_WORKERS=5