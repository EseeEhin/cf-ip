# yx-tools éäº¤äº’å¼è¿è¡ŒæŒ‡å—

## å¿«é€Ÿå¼€å§‹

æœ¬é¡¹ç›®å·²é›†æˆ yx-tools çš„éäº¤äº’å¼åŒ…è£…è„šæœ¬ï¼Œå¯åœ¨ GitHub Actions ä¸­è‡ªåŠ¨è¿è¡Œ Cloudflare æµ‹é€Ÿã€‚

## æ–‡ä»¶ä½ç½®

- **åŒ…è£…è„šæœ¬**ï¼š[`yx-tools-2.2.1/yx-tools-2.2.1/run_speedtest.py`](yx-tools-2.2.1/yx-tools-2.2.1/run_speedtest.py:1)
- **åŸå§‹è„šæœ¬**ï¼š[`yx-tools-2.2.1/yx-tools-2.2.1/cloudflare_speedtest.py`](yx-tools-2.2.1/yx-tools-2.2.1/cloudflare_speedtest.py:1)
- **è¯¦ç»†æ–‡æ¡£**ï¼š[`yx-tools-2.2.1/yx-tools-2.2.1/README_NON_INTERACTIVE.md`](yx-tools-2.2.1/yx-tools-2.2.1/README_NON_INTERACTIVE.md:1)

## æœ¬åœ°æµ‹è¯•

### 1. åŸºæœ¬æµ‹è¯•ï¼ˆä½¿ç”¨é»˜è®¤å‚æ•°ï¼‰

```bash
cd yx-tools-2.2.1/yx-tools-2.2.1
python run_speedtest.py
```

### 2. è‡ªå®šä¹‰å‚æ•°æµ‹è¯•

```bash
cd yx-tools-2.2.1/yx-tools-2.2.1

# æµ‹è¯•é¦™æ¸¯èŠ‚ç‚¹ï¼Œ30ä¸ªIPï¼Œå»¶è¿Ÿä¸Šé™300msï¼Œé€Ÿåº¦ä¸‹é™5MB/s
python run_speedtest.py --airport-code HKG --dn-count 30 --time-limit 300 --speed-limit 5
```

### 3. æŸ¥çœ‹æ‰€æœ‰å‚æ•°

```bash
cd yx-tools-2.2.1/yx-tools-2.2.1
python run_speedtest.py --help
```

## GitHub Actions é›†æˆ

å·¥ä½œæµæ–‡ä»¶å·²æ›´æ–°ï¼š[`.github/workflows/update-ips.yml`](.github/workflows/update-ips.yml:1)

### å½“å‰é…ç½®

å·¥ä½œæµä¼šè‡ªåŠ¨æµ‹è¯•ä¸‰ä¸ªåœ°åŒºï¼š
- ğŸ‡­ğŸ‡° é¦™æ¸¯ (HKG)
- ğŸ‡¯ğŸ‡µ ä¸œäº¬ (NRT)
- ğŸ‡ºğŸ‡¸ æ´›æ‰çŸ¶ (LAX)

æ¯ä¸ªåœ°åŒºæµ‹è¯• 30 ä¸ªèŠ‚ç‚¹ï¼Œå»¶è¿Ÿä¸Šé™ 300msï¼Œé€Ÿåº¦ä¸‹é™ 5MB/sã€‚

### æ‰‹åŠ¨è§¦å‘

1. è®¿é—® GitHub ä»“åº“çš„ Actions é¡µé¢
2. é€‰æ‹© "Update Optimal IPs" å·¥ä½œæµ
3. ç‚¹å‡» "Run workflow" æŒ‰é’®
4. é€‰æ‹©åˆ†æ”¯å¹¶è¿è¡Œ

### å®šæ—¶è¿è¡Œ

å·¥ä½œæµæ¯ 3 å°æ—¶è‡ªåŠ¨è¿è¡Œä¸€æ¬¡ï¼ˆUTCæ—¶é—´ï¼‰ã€‚

## ä¸»è¦æ”¹è¿›

### âœ… è§£å†³çš„é—®é¢˜

1. **EOF é”™è¯¯**ï¼šåŸè„šæœ¬åœ¨ GitHub Actions ä¸­å› äº¤äº’å¼è¾“å…¥å¯¼è‡´ `EOF when reading a line` é”™è¯¯
2. **heredoc é™åˆ¶**ï¼šä½¿ç”¨ `<<EOF` æ— æ³•æ­£ç¡®å¤„ç†æ‰€æœ‰äº¤äº’æµç¨‹
3. **ç»´æŠ¤å›°éš¾**ï¼šæ¯æ¬¡ä¿®æ”¹å‚æ•°éœ€è¦æ›´æ–°å¤šå¤„ä»£ç 

### âœ… æ–°åŠŸèƒ½

1. **å‘½ä»¤è¡Œå‚æ•°**ï¼šæ‰€æœ‰é…ç½®é€šè¿‡å‚æ•°æŒ‡å®šï¼Œæ— éœ€äº¤äº’
2. **è‡ªåŠ¨åŒ–å‹å¥½**ï¼šå®Œç¾é€‚é… GitHub Actions å’Œå…¶ä»– CI/CD ç¯å¢ƒ
3. **ç»“æœå±•ç¤º**ï¼šè‡ªåŠ¨æ˜¾ç¤ºæµ‹é€Ÿç»“æœæ‘˜è¦
4. **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„è¶…æ—¶å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶

## å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--ip-version` | 1 | IPç‰ˆæœ¬ï¼š1=IPv4, 2=IPv6 |
| `--function` | 1 | åŠŸèƒ½ï¼š1=å°ç™½å¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èï¼‰, 2=å¸¸è§„æµ‹é€Ÿ, 3=ä¼˜é€‰åä»£ |
| `--airport-code` | HKG | æœºåœºç ï¼ˆå¦‚ï¼šHKG, NRT, LAX, SIN, FRAï¼‰ |
| `--dn-count` | 30 | æµ‹è¯•èŠ‚ç‚¹æ•°é‡ |
| `--time-limit` | 300 | å»¶è¿Ÿä¸Šé™ï¼ˆæ¯«ç§’ï¼‰ |
| `--speed-limit` | 5 | é€Ÿåº¦ä¸‹é™ï¼ˆMB/sï¼‰ |

## å¸¸ç”¨æœºåœºç 

| æœºåœºç  | åœ°åŒº | è¯´æ˜ |
|--------|------|------|
| HKG | é¦™æ¸¯ | äºšå¤ªåœ°åŒºï¼Œä½å»¶è¿Ÿ |
| NRT | ä¸œäº¬ | æ—¥æœ¬ï¼Œç¨³å®šæ€§å¥½ |
| LAX | æ´›æ‰çŸ¶ | ç¾å›½è¥¿æµ·å²¸ |
| SIN | æ–°åŠ å¡ | ä¸œå—äºšæ¢çº½ |
| FRA | æ³•å…°å…‹ç¦ | æ¬§æ´²æ¢çº½ |
| SYD | æ‚‰å°¼ | æ¾³å¤§åˆ©äºš |
| LHR | ä¼¦æ•¦ | è‹±å›½ |

å®Œæ•´æœºåœºç åˆ—è¡¨è¯·æŸ¥çœ‹ [`cloudflare_speedtest.py`](yx-tools-2.2.1/yx-tools-2.2.1/cloudflare_speedtest.py:90) ä¸­çš„ `AIRPORT_CODES` å­—å…¸ã€‚

## è¾“å‡ºæ–‡ä»¶

æµ‹é€Ÿå®Œæˆåä¼šç”Ÿæˆï¼š

- **result.csv**ï¼šæµ‹é€Ÿç»“æœæ–‡ä»¶
  - æ ¼å¼ï¼š`IPåœ°å€,ç«¯å£,å»¶è¿Ÿå¹³å‡å€¼,ä¸‹è½½é€Ÿåº¦,ä¸Šä¼ é€Ÿåº¦`
  - æŒ‰é€Ÿåº¦ä»å¿«åˆ°æ…¢æ’åº

## æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šè„šæœ¬è¿è¡Œè¶…æ—¶

**åŸå› **ï¼šæµ‹è¯•èŠ‚ç‚¹æ•°é‡è¿‡å¤šæˆ–ç½‘ç»œè¾ƒæ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å‡å°‘æµ‹è¯•èŠ‚ç‚¹æ•°é‡
python run_speedtest.py --dn-count 10
```

### é—®é¢˜ 2ï¼šæœªç”Ÿæˆç»“æœæ–‡ä»¶

**åŸå› **ï¼šæµ‹é€Ÿå‚æ•°è¿‡äºä¸¥æ ¼ï¼Œæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„IP

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨æ›´å®½æ¾çš„å‚æ•°
python run_speedtest.py --time-limit 1000 --speed-limit 1
```

### é—®é¢˜ 3ï¼šGitHub Actions å¤±è´¥

**æ£€æŸ¥æ­¥éª¤**ï¼š
1. æŸ¥çœ‹ Actions æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ yx-tools ç›®å½•ç»“æ„æ­£ç¡®
3. æ£€æŸ¥ Python ä¾èµ–æ˜¯å¦å®‰è£…ï¼ˆrequestsï¼‰

## æŠ€æœ¯ç»†èŠ‚

### å®ç°åŸç†

[`run_speedtest.py`](yx-tools-2.2.1/yx-tools-2.2.1/run_speedtest.py:1) é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°éäº¤äº’å¼è¿è¡Œï¼š

1. ä½¿ç”¨ `argparse` è§£æå‘½ä»¤è¡Œå‚æ•°
2. æ ¹æ®å‚æ•°ç”Ÿæˆé¢„å®šä¹‰çš„è¾“å…¥åºåˆ—
3. é€šè¿‡ `subprocess.run()` çš„ `input` å‚æ•°ä¼ é€’ç»™åŸå§‹è„šæœ¬
4. æ•è·è¾“å‡ºå¹¶å±•ç¤ºç»“æœæ‘˜è¦

### ä¸ºä»€ä¹ˆä½¿ç”¨åŒ…è£…è„šæœ¬ï¼Ÿ

ç›¸æ¯”ç›´æ¥ä¿®æ”¹åŸå§‹è„šæœ¬ï¼Œä½¿ç”¨åŒ…è£…è„šæœ¬æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- âœ… **ä¿æŒåŸè„šæœ¬å®Œæ•´æ€§**ï¼šä¸ä¿®æ”¹åŸå§‹ä»£ç ï¼Œä¾¿äºæ›´æ–°
- âœ… **æ˜“äºç»´æŠ¤**ï¼šåŒ…è£…é€»è¾‘ç‹¬ç«‹ï¼Œä¸å½±å“åŸæœ‰åŠŸèƒ½
- âœ… **å‘åå…¼å®¹**ï¼šåŸè„šæœ¬ä»å¯æ­£å¸¸äº¤äº’å¼ä½¿ç”¨
- âœ… **çµæ´»æ‰©å±•**ï¼šå¯è½»æ¾æ·»åŠ æ–°åŠŸèƒ½å’Œå‚æ•°

## ç›¸å…³é“¾æ¥

- **yx-tools åŸé¡¹ç›®**ï¼šhttps://github.com/yonggekkk/Cloudflare_vless_trojan
- **è¯¦ç»†ä½¿ç”¨æ–‡æ¡£**ï¼š[README_NON_INTERACTIVE.md](yx-tools-2.2.1/yx-tools-2.2.1/README_NON_INTERACTIVE.md:1)
- **GitHub Actions å·¥ä½œæµ**ï¼š[update-ips.yml](.github/workflows/update-ips.yml:1)

## æ›´æ–°æ—¥å¿—

### 2025-11-03

- âœ¨ åˆ›å»ºéäº¤äº’å¼åŒ…è£…è„šæœ¬ [`run_speedtest.py`](yx-tools-2.2.1/yx-tools-2.2.1/run_speedtest.py:1)
- âœ… æ›´æ–° GitHub Actions å·¥ä½œæµä½¿ç”¨æ–°è„šæœ¬
- ğŸ“ æ·»åŠ è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
- ğŸ› ä¿®å¤ EOF é”™è¯¯å’Œäº¤äº’å¼è¾“å…¥é—®é¢˜

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·åœ¨ GitHub Issues ä¸­åé¦ˆã€‚